% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_metadata.R
\name{get_metadata}
\alias{get_metadata}
\title{Get metadata for a datos.madrid.es dataset}
\usage{
get_metadata(url)
}
\arguments{
\item{url}{Character. Absolute URL to a dataset detail page
(e.g., "https://datos.madrid.es/egob/catalogo/300228-0-agenda-actividades-culturales").
Prefer passing the full URL returned by \code{search_datasets()}.}
}
\value{
A named list with:
\itemize{
\item \code{title} (chr)
\item \code{description} (chr)
\item \code{last_update} (chr, best-effort)
\item \code{tags} (chr vector, best-effort)
\item \code{resources} (tibble): columns \code{label}, \code{format}, \code{url}
}
}
\description{
Scrapes a dataset \emph{detail page} on \url{https://datos.madrid.es} and returns
key metadata plus a table of downloadable resources (CSV, JSON, XML, XLS, PDF, etc.).
}
\details{
This function is resilient to minor HTML changes. It searches multiple common
selectors for titles, descriptions, and metadata terms found on Spanish open
data portals (e.g., "Descripción", "Fecha de actualización", "Etiquetas").
Downloadable resources are inferred from links and their file extensions.
}
\examples{
\dontrun{
meta <- get_metadata(
  "https://datos.madrid.es/sites/v/index.jsp?vgnextoid=7c2843010d9c3610VgnVCM2000001f4a900aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD"
)
meta$title
meta$resources
}

}
