% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_dataset.R
\name{download_dataset}
\alias{download_dataset}
\title{Download and parse a dataset from datos.madrid.es}
\usage{
download_dataset(
  url,
  save_to = NULL,
  return = c("parsed", "path", "both"),
  quiet = TRUE
)
}
\arguments{
\item{url}{Character scalar. Either a dataset detail page URL
(e.g., "https://datos.madrid.es/egob/catalogo/300228-0-agenda-actividades-culturales")
or a direct file URL (ends with .csv, .json, .xml, .xls, .xlsx, .txt).}

\item{save_to}{Optional path (directory or file). If a directory, the filename
is inferred from the URL. If \code{NULL} (default), a temporary file is used.}

\item{return}{What to return: \code{"parsed"} (default), \code{"path"} (file path only),
or \code{"both"} (list with \code{data} and \code{path}).}

\item{quiet}{Logical, suppress messages. Default TRUE.}

\item{format}{Optional character scalar to force a specific format
(e.g., "csv", "json", "xml", "xls", "xlsx", "txt"). Case-insensitive.}

\item{prefer}{Character vector defining the format preference order when
\code{format} is not supplied. Defaults to c("csv", "json", "xml", "xlsx", "xls", "txt").}
}
\value{
By default, a parsed R object:
\itemize{
\item data.frame (CSV, XLS/XLSX, TXT with delimiters)
\item list or data.frame (JSON; depends on structure)
\item xml_document (XML)
}
If \code{return = "path"}, returns the downloaded file path.
If \code{return = "both"}, returns a list with elements \code{data} and \code{path}.
}
\description{
Given either a dataset \emph{detail page URL} (preferred) or a \emph{direct file URL},
this function downloads the resource (CSV/JSON/XML/XLS/XLSX/TXT) and returns
a parsed R object. If a detail page URL is provided, the function uses
\code{get_metadata()} to discover available resources and selects one based on
\code{format} or \code{prefer} ordering.
}
\examples{
out <- download_dataset(
  "https://datos.madrid.es/egob/catalogo/300228-0-agenda-actividades-culturales"
)

}
